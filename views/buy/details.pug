extends ./../partials/header
block main
  .content-all-wrapper
    .main-product-wrapper
      .product-left-side
        .product-image-wrapper
          img.main-product-image(src=product.productPhotoArray[0])
        .product-images-menu
          img.product-menu-image.selected-menu-image(src=product.productPhotoArray[0])
          if product.productPhotoArray[1]
            img.product-menu-image(src=product.productPhotoArray[1])
          if product.productPhotoArray[2]
            img.product-menu-image(src=product.productPhotoArray[2])
          if product.productPhotoArray[3]
            img.product-menu-image(src=product.productPhotoArray[4])
          if product.productPhotoArray[4]
            img.product-menu-image(src=product.productPhotoArray[4])
      .product-right-side
        span.main-product-created-at Added #{product.createdAt}
        span.main-product-title= product.name
        .main-product-location
            i.fas.fa-map-marker-alt
            span= product.location
        span.main-product-description= product.description
        span.main-product-price= product.price
    form.send-message-wrapper(action="/messages/buy/?id=" + product._id method="post")
      span.send-message-title Nachricht schreiben
      textarea.message-input(name="message" placeholder="Nachricht")
      button.send-message-button Nachricht Senden
    span.other-products-title Ã„hnliche Anzeigen
    .other-products-wrapper
      each product in similarProducts
        if product.price == "SOLD"
          .each-product(href="/sell/details/?id=" + product._id)
            .each-product-image-wrapper
              .each-product-image-inner-wrapper
                img.product-image(src=product.productPhotoArray[0])
            span.product-name #{product.name}
            .product-location
              i.fas.fa-map-marker-alt
              span= product.location
            span.product-price VERKAUFT
        else if (user && product.owner == user._id.toString())
          a.each-product(href="/sell/details/?id=" + product._id)
            .each-product-image-wrapper
              .each-product-image-inner-wrapper
                img.product-image(src=product.productPhotoArray[0])
            span.product-name #{product.name}
            .product-location
              i.fas.fa-map-marker-alt
              span= product.location
            span.product-price #{product.price}
        else if (user && product.messages.filter(message => { if (message.senderId == user._id) return message; }).length > 0)
          a.each-product(href="/buy/messages/?id=" + product._id)
            .each-product-image-wrapper
              .each-product-image-inner-wrapper
                img.product-image(src=product.productPhotoArray[0])
            span.product-name #{product.name}
            .product-location
              i.fas.fa-map-marker-alt
              span= product.location
            span.product-price #{product.price}
        else 
          a.each-product(href="/buy/details/?id=" + product._id)
            .each-product-image-wrapper
              .each-product-image-inner-wrapper
                img.product-image(src=product.productPhotoArray[0])
            span.product-name #{product.name}
            .product-location
              i.fas.fa-map-marker-alt
              span= product.location
            span.product-price #{product.price}

