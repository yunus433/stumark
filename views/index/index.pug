extends ./../partials/header
block main
  .general-info-wrapper
    span Merke dein Produkt, schick deine Nachricht und einfach kauf!
  span.latest-product-title Actuelle Angebote
  .latest-product-wrapper
    each product in products
      if product.price == "SOLD"
        .each-product(href="/sell/details/?id=" + product._id)
          img.product-image(src=product.productPhotoArray[0].source)
          span.product-name #{product.name}
          .product-location
            i.fas.fa-map-marker-alt
            span= product.location
          span.product-price #{product.price}
      else if (user && product.owner == user._id.toString())
        a.each-product(href="/sell/details/?id=" + product._id)
          img.product-image(src=product.productPhotoArray[0].source)
          span.product-name #{product.name}
          .product-location
            i.fas.fa-map-marker-alt
            span= product.location
          span.product-price #{product.price}
      else if (user && product.messages.filter(message => { if (message.senderId == user._id) return message; }).length > 0)
        a.each-product(href="/buy/messages/?id=" + product._id)
          img.product-image(src=product.productPhotoArray[0].source)
          span.product-name #{product.name}
          .product-location
            i.fas.fa-map-marker-alt
            span= product.location
          span.product-price #{product.price}
      else 
        a.each-product(href="/buy/details/?id=" + product._id)
          img.product-image(src=product.productPhotoArray[0].source)
          span.product-name #{product.name}
          .product-location
            i.fas.fa-map-marker-alt
            span= product.location
          span.product-price #{product.price}
